# Tenant Schemas for OpenAPI v1
# Image & Location Enhancement - Day 1

TenantBase:
  type: object
  description: Base tenant properties (core fields)
  required:
    - id
    - name
    - status
  properties:
    id:
      type: string
      format: uuid
      description: Tenant unique identifier
      example: "11111111-1111-1111-1111-111111111111"
    name:
      type: string
      description: Tenant name
      example: "HQ Tenant"
      minLength: 1
      maxLength: 255
    address:
      type: string
      nullable: true
      description: Tenant business address (text)
      example: "Jl. Sudirman No. 123, Jakarta"
    phone:
      type: string
      nullable: true
      description: Tenant phone number
      example: "+62-21-1234567"
    status:
      type: string
      enum: [active, inactive, suspended]
      description: Tenant account status
      default: active
    settings:
      type: object
      nullable: true
      description: Tenant-specific settings (JSON)
      additionalProperties: true
    can_auto_activate_users:
      type: boolean
      description: Whether tenant can auto-activate new users
      default: false
    auto_activate_request_pending:
      type: boolean
      description: Whether auto-activation request is pending approval
      default: false
    auto_activate_requested_at:
      type: string
      format: date-time
      nullable: true
      description: Timestamp of auto-activation request
    created_at:
      type: string
      format: date-time
      description: Tenant creation timestamp
    updated_at:
      type: string
      format: date-time
      description: Tenant last update timestamp

TenantImageFields:
  type: object
  description: Image/logo fields for tenant branding
  properties:
    logo_url:
      type: string
      nullable: true
      format: uri
      description: Full-size tenant logo URL
      example: "http://localhost:8000/storage/tenants/11111111-1111-1111-1111-111111111111/logo_abc123.jpg"
    logo_thumb_url:
      type: string
      nullable: true
      format: uri
      description: Thumbnail version of tenant logo (300x300)
      example: "http://localhost:8000/storage/tenants/11111111-1111-1111-1111-111111111111/logo_abc123_thumb.jpg"
    has_logo:
      type: boolean
      description: Computed accessor - whether tenant has logo uploaded
      readOnly: true
      example: true

TenantLocationFields:
  type: object
  description: Location fields for tenant business address mapping
  properties:
    latitude:
      type: number
      format: double
      nullable: true
      description: Business location latitude
      example: -6.208763
      minimum: -90
      maximum: 90
    longitude:
      type: number
      format: double
      nullable: true
      description: Business location longitude
      example: 106.845599
      minimum: -180
      maximum: 180
    location_address:
      type: string
      nullable: true
      description: Human-readable location address (reverse geocoded)
      example: "Jl. Sudirman, Jakarta Selatan, DKI Jakarta, Indonesia"
    has_location:
      type: boolean
      description: Computed accessor - whether tenant has location set
      readOnly: true
      example: true
    location_coordinates:
      type: object
      nullable: true
      readOnly: true
      description: Computed accessor - location as coordinate object
      properties:
        lat:
          type: number
          format: double
        lng:
          type: number
          format: double
      example:
        lat: -6.208763
        lng: 106.845599

TenantComplete:
  allOf:
    - $ref: '#/TenantBase'
    - $ref: '#/TenantImageFields'
    - $ref: '#/TenantLocationFields'
  description: Complete tenant resource with all fields

TenantListResponse:
  type: object
  description: Paginated list of tenants
  properties:
    data:
      type: array
      items:
        $ref: '#/TenantComplete'
    meta:
      $ref: ./common.yaml#/Pagination

TenantRequest:
  type: object
  description: Request body for creating/updating tenant
  required:
    - name
  properties:
    name:
      type: string
      minLength: 1
      maxLength: 255
      example: "Branch Office Jakarta"
    address:
      type: string
      nullable: true
      example: "Jl. Gatot Subroto No. 45, Jakarta"
    phone:
      type: string
      nullable: true
      example: "+62-21-7654321"
    status:
      type: string
      enum: [active, inactive, suspended]
      default: active
    settings:
      type: object
      nullable: true
      additionalProperties: true
    # Image/Location fields (optional, can be set via dedicated endpoints)
    latitude:
      type: number
      format: double
      nullable: true
      minimum: -90
      maximum: 90
    longitude:
      type: number
      format: double
      nullable: true
      minimum: -180
      maximum: 180
    location_address:
      type: string
      nullable: true

ImageUploadResponse:
  type: object
  description: Response after successful image upload
  properties:
    message:
      type: string
      example: "Logo uploaded successfully."
    logo_url:
      type: string
      format: uri
      example: "http://localhost:8000/storage/tenants/11111111-1111-1111-1111-111111111111/logo_abc123.jpg"
    logo_thumb_url:
      type: string
      format: uri
      example: "http://localhost:8000/storage/tenants/11111111-1111-1111-1111-111111111111/logo_abc123_thumb.jpg"

ImageDeleteResponse:
  type: object
  description: Response after successful image deletion
  properties:
    message:
      type: string
      example: "Logo deleted successfully."