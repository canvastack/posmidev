[2025-09-28 19:48:13] testing.ERROR: Call to undefined method App\Http\Resources\ProductResource::getId() {"userId":"0a3818fa-15b8-472b-982a-05d9f9f6891d","exception":"[object] (BadMethodCallException(code: 0): Call to undefined method App\\Http\\Resources\\ProductResource::getId() at D:\\worksites\\posmidev\\vendor\\laravel\\framework\\src\\Illuminate\\Support\\Traits\\ForwardsCalls.php:67)
[stacktrace]
#0 D:\\worksites\\posmidev\\vendor\\laravel\\framework\\src\\Illuminate\\Support\\Traits\\ForwardsCalls.php(36): Illuminate\\Http\\Resources\\Json\\JsonResource::throwBadMethodCallException('getId')
#1 D:\\worksites\\posmidev\\vendor\\laravel\\framework\\src\\Illuminate\\Http\\Resources\\DelegatesToResource.php(155): Illuminate\\Http\\Resources\\Json\\JsonResource->forwardCallTo(Object(Src\\Pms\\Infrastructure\\Models\\Product), 'getId', Array)
#2 D:\\worksites\\posmidev\\app\\Http\\Resources\\ProductResource.php(13): Illuminate\\Http\\Resources\\Json\\JsonResource->__call('getId', Array)
#3 D:\\worksites\\posmidev\\app\\Http\\Controllers\\Api\\ProductController.php(72): App\\Http\\Resources\\ProductResource->toArray(Object(Illuminate\\Http\\Request))
#4 D:\\worksites\\posmidev\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Controller.php(54): App\\Http\\Controllers\\Api\\ProductController->show(Object(Illuminate\\Http\\Request), '287ed47e-faf9-4...', Object(Src\\Pms\\Infrastructure\\Models\\Product))
#5 D:\\worksites\\posmidev\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\ControllerDispatcher.php(43): Illuminate\\Routing\\Controller->callAction('show', Array)
#6 D:\\worksites\\posmidev\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Route.php(259): Illuminate\\Routing\\ControllerDispatcher->dispatch(Object(Illuminate\\Routing\\Route), Object(App\\Http\\Controllers\\Api\\ProductController), 'show')
#7 D:\\worksites\\posmidev\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Route.php(205): Illuminate\\Routing\\Route->runController()
#8 D:\\worksites\\posmidev\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Router.php(806): Illuminate\\Routing\\Route->run()
#9 D:\\worksites\\posmidev\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(144): Illuminate\\Routing\\Router->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))
#10 D:\\worksites\\posmidev\\app\\Http\\Middleware\\SetPermissionsTeamFromTenant.php(23): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#11 D:\\worksites\\posmidev\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(183): App\\Http\\Middleware\\SetPermissionsTeamFromTenant->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#12 D:\\worksites\\posmidev\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Middleware\\SubstituteBindings.php(50): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#13 D:\\worksites\\posmidev\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(183): Illuminate\\Routing\\Middleware\\SubstituteBindings->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#14 D:\\worksites\\posmidev\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Middleware\\ThrottleRequests.php(159): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#15 D:\\worksites\\posmidev\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Middleware\\ThrottleRequests.php(125): Illuminate\\Routing\\Middleware\\ThrottleRequests->handleRequest(Object(Illuminate\\Http\\Request), Object(Closure), Array)
#16 D:\\worksites\\posmidev\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Middleware\\ThrottleRequests.php(87): Illuminate\\Routing\\Middleware\\ThrottleRequests->handleRequestUsingNamedLimiter(Object(Illuminate\\Http\\Request), Object(Closure), 'api', Object(Closure))
#17 D:\\worksites\\posmidev\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(183): Illuminate\\Routing\\Middleware\\ThrottleRequests->handle(Object(Illuminate\\Http\\Request), Object(Closure), 'api')
#18 D:\\worksites\\posmidev\\vendor\\laravel\\framework\\src\\Illuminate\\Auth\\Middleware\\Authenticate.php(57): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#19 D:\\worksites\\posmidev\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(183): Illuminate\\Auth\\Middleware\\Authenticate->handle(Object(Illuminate\\Http\\Request), Object(Closure), 'api')
#20 D:\\worksites\\posmidev\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(119): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#21 D:\\worksites\\posmidev\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Router.php(805): Illuminate\\Pipeline\\Pipeline->then(Object(Closure))
#22 D:\\worksites\\posmidev\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Router.php(784): Illuminate\\Routing\\Router->runRouteWithinStack(Object(Illuminate\\Routing\\Route), Object(Illuminate\\Http\\Request))
#23 D:\\worksites\\posmidev\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Router.php(748): Illuminate\\Routing\\Router->runRoute(Object(Illuminate\\Http\\Request), Object(Illuminate\\Routing\\Route))
#24 D:\\worksites\\posmidev\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Router.php(737): Illuminate\\Routing\\Router->dispatchToRoute(Object(Illuminate\\Http\\Request))
#25 D:\\worksites\\posmidev\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Kernel.php(200): Illuminate\\Routing\\Router->dispatch(Object(Illuminate\\Http\\Request))
#26 D:\\worksites\\posmidev\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(144): Illuminate\\Foundation\\Http\\Kernel->Illuminate\\Foundation\\Http\\{closure}(Object(Illuminate\\Http\\Request))
#27 D:\\worksites\\posmidev\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Middleware\\TransformsRequest.php(21): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#28 D:\\worksites\\posmidev\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Middleware\\ConvertEmptyStringsToNull.php(31): Illuminate\\Foundation\\Http\\Middleware\\TransformsRequest->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#29 D:\\worksites\\posmidev\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(183): Illuminate\\Foundation\\Http\\Middleware\\ConvertEmptyStringsToNull->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#30 D:\\worksites\\posmidev\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Middleware\\TransformsRequest.php(21): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#31 D:\\worksites\\posmidev\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Middleware\\TrimStrings.php(40): Illuminate\\Foundation\\Http\\Middleware\\TransformsRequest->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#32 D:\\worksites\\posmidev\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(183): Illuminate\\Foundation\\Http\\Middleware\\TrimStrings->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#33 D:\\worksites\\posmidev\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Middleware\\ValidatePostSize.php(27): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#34 D:\\worksites\\posmidev\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(183): Illuminate\\Foundation\\Http\\Middleware\\ValidatePostSize->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#35 D:\\worksites\\posmidev\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Middleware\\PreventRequestsDuringMaintenance.php(99): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#36 D:\\worksites\\posmidev\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(183): Illuminate\\Foundation\\Http\\Middleware\\PreventRequestsDuringMaintenance->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#37 D:\\worksites\\posmidev\\vendor\\laravel\\framework\\src\\Illuminate\\Http\\Middleware\\HandleCors.php(62): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#38 D:\\worksites\\posmidev\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(183): Illuminate\\Http\\Middleware\\HandleCors->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#39 D:\\worksites\\posmidev\\vendor\\laravel\\framework\\src\\Illuminate\\Http\\Middleware\\TrustProxies.php(39): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#40 D:\\worksites\\posmidev\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(183): Illuminate\\Http\\Middleware\\TrustProxies->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#41 D:\\worksites\\posmidev\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(119): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#42 D:\\worksites\\posmidev\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Kernel.php(175): Illuminate\\Pipeline\\Pipeline->then(Object(Closure))
#43 D:\\worksites\\posmidev\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Kernel.php(144): Illuminate\\Foundation\\Http\\Kernel->sendRequestThroughRouter(Object(Illuminate\\Http\\Request))
#44 D:\\worksites\\posmidev\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Testing\\Concerns\\MakesHttpRequests.php(585): Illuminate\\Foundation\\Http\\Kernel->handle(Object(Illuminate\\Http\\Request))
#45 D:\\worksites\\posmidev\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Testing\\Concerns\\MakesHttpRequests.php(551): Illuminate\\Foundation\\Testing\\TestCase->call('GET', '/api/v1/tenants...', Array, Array, Array, Array, '[]')
#46 D:\\worksites\\posmidev\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Testing\\Concerns\\MakesHttpRequests.php(359): Illuminate\\Foundation\\Testing\\TestCase->json('GET', '/api/v1/tenants...', Array, Array, 0)
#47 D:\\worksites\\posmidev\\tests\\Feature\\OrdersApiTest.php(153): Illuminate\\Foundation\\Testing\\TestCase->getJson('/api/v1/tenants...', Array)
#48 D:\\worksites\\posmidev\\vendor\\phpunit\\phpunit\\src\\Framework\\TestCase.php(1188): Tests\\Feature\\OrdersApiTest->test_cannot_create_order_with_insufficient_stock()
#49 D:\\worksites\\posmidev\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Testing\\TestCase.php(62): PHPUnit\\Framework\\TestCase->runTest()
#50 D:\\worksites\\posmidev\\vendor\\phpunit\\phpunit\\src\\Framework\\TestCase.php(687): Illuminate\\Foundation\\Testing\\TestCase->runTest()
#51 D:\\worksites\\posmidev\\vendor\\phpunit\\phpunit\\src\\Framework\\TestRunner.php(104): PHPUnit\\Framework\\TestCase->runBare()
#52 D:\\worksites\\posmidev\\vendor\\phpunit\\phpunit\\src\\Framework\\TestCase.php(517): PHPUnit\\Framework\\TestRunner->run(Object(Tests\\Feature\\OrdersApiTest))
#53 D:\\worksites\\posmidev\\vendor\\phpunit\\phpunit\\src\\Framework\\TestSuite.php(378): PHPUnit\\Framework\\TestCase->run()
#54 D:\\worksites\\posmidev\\vendor\\phpunit\\phpunit\\src\\Framework\\TestSuite.php(378): PHPUnit\\Framework\\TestSuite->run()
#55 D:\\worksites\\posmidev\\vendor\\phpunit\\phpunit\\src\\Framework\\TestSuite.php(378): PHPUnit\\Framework\\TestSuite->run()
#56 D:\\worksites\\posmidev\\vendor\\phpunit\\phpunit\\src\\TextUI\\TestRunner.php(62): PHPUnit\\Framework\\TestSuite->run()
#57 D:\\worksites\\posmidev\\vendor\\phpunit\\phpunit\\src\\TextUI\\Application.php(199): PHPUnit\\TextUI\\TestRunner->run(Object(PHPUnit\\TextUI\\Configuration\\Configuration), Object(PHPUnit\\Runner\\ResultCache\\DefaultResultCache), Object(PHPUnit\\Framework\\TestSuite))
#58 D:\\worksites\\posmidev\\vendor\\phpunit\\phpunit\\phpunit(104): PHPUnit\\TextUI\\Application->run(Array)
#59 {main}
"} 
[2025-09-28 19:49:01] testing.INFO: Stock update verification {"product_id":"558a5f9b-448d-4b97-9f04-818384187200","original_stock":50,"update_response_status":200,"update_response_content":{"data":{"id":"558a5f9b-448d-4b97-9f04-818384187200","name":"Test Product","sku":"TEST-68d9912dda5f2","price":100,"stock":2,"tenant_id":"58a9a595-b585-46ad-a557-8b779a9879e7","category_id":null,"description":"Test product description","cost_price":80,"created_at":"2025-09-28 19:49:01"}},"verify_response_status":200,"verify_response_content":{"id":"558a5f9b-448d-4b97-9f04-818384187200","name":"Test Product","sku":"TEST-68d9912dda5f2","price":"100.00","stock":2,"tenant_id":"58a9a595-b585-46ad-a557-8b779a9879e7","category_id":null,"description":"Test product description","cost_price":"80.00","created_at":"2025-09-28 19:49:01"},"expected_stock":2,"actual_stock":2} 
[2025-09-28 19:49:01] testing.INFO: OrderService: Finding product {"product_id":"558a5f9b-448d-4b97-9f04-818384187200","tenant_id":"58a9a595-b585-46ad-a557-8b779a9879e7","requested_quantity":5} 
[2025-09-28 19:49:01] testing.INFO: OrderService: Product found, checking stock {"product_id":"558a5f9b-448d-4b97-9f04-818384187200","product_name":"Test Product","current_stock":2,"requested_quantity":5,"tenant_id":"58a9a595-b585-46ad-a557-8b779a9879e7"} 
[2025-09-28 19:49:01] testing.ERROR: OrderService: Insufficient stock detected {"product_id":"558a5f9b-448d-4b97-9f04-818384187200","product_name":"Test Product","current_stock":2,"requested_quantity":5,"tenant_id":"58a9a595-b585-46ad-a557-8b779a9879e7"} 
[2025-09-28 19:49:37] testing.INFO: Stock update verification {"product_id":"5674a0b0-afca-4bfd-a0fa-8c13849b2900","original_stock":50,"update_response_status":200,"update_response_content":{"data":{"id":"5674a0b0-afca-4bfd-a0fa-8c13849b2900","name":"Test Product","sku":"TEST-68d9915169fe3","price":100,"stock":2,"tenant_id":"68073a18-4af6-4236-b5f8-fef01a2b6708","category_id":null,"description":"Test product description","cost_price":80,"created_at":"2025-09-28 19:49:37"}},"verify_response_status":200,"verify_response_content":{"id":"5674a0b0-afca-4bfd-a0fa-8c13849b2900","name":"Test Product","sku":"TEST-68d9915169fe3","price":"100.00","stock":2,"tenant_id":"68073a18-4af6-4236-b5f8-fef01a2b6708","category_id":null,"description":"Test product description","cost_price":"80.00","created_at":"2025-09-28 19:49:37"},"expected_stock":2,"actual_stock":2} 
[2025-09-28 19:49:37] testing.INFO: OrderService: Finding product {"product_id":"5674a0b0-afca-4bfd-a0fa-8c13849b2900","tenant_id":"68073a18-4af6-4236-b5f8-fef01a2b6708","requested_quantity":5} 
[2025-09-28 19:49:37] testing.INFO: OrderService: Product found, checking stock {"product_id":"5674a0b0-afca-4bfd-a0fa-8c13849b2900","product_name":"Test Product","current_stock":2,"requested_quantity":5,"tenant_id":"68073a18-4af6-4236-b5f8-fef01a2b6708"} 
[2025-09-28 19:49:37] testing.ERROR: OrderService: Insufficient stock detected {"product_id":"5674a0b0-afca-4bfd-a0fa-8c13849b2900","product_name":"Test Product","current_stock":2,"requested_quantity":5,"tenant_id":"68073a18-4af6-4236-b5f8-fef01a2b6708"} 
[2025-09-28 19:49:37] testing.INFO: Stock validation response {"status":422,"response_data":{"message":"Insufficient stock for product: Test Product"},"has_errors":false,"has_message":true,"all_keys":["message"]} 
[2025-09-28 19:49:53] testing.INFO: OrderService: Finding product {"product_id":"001132d4-be48-4901-98e5-42080c9472ea","tenant_id":"4fd2783a-ce5b-46c2-b04f-af02d5ecf186","requested_quantity":2} 
[2025-09-28 19:49:53] testing.INFO: OrderService: Product found, checking stock {"product_id":"001132d4-be48-4901-98e5-42080c9472ea","product_name":"Test Product","current_stock":50,"requested_quantity":2,"tenant_id":"4fd2783a-ce5b-46c2-b04f-af02d5ecf186"} 
[2025-09-28 19:49:53] testing.INFO: OrderService: Finding product {"product_id":"001132d4-be48-4901-98e5-42080c9472ea","tenant_id":"4fd2783a-ce5b-46c2-b04f-af02d5ecf186","requested_quantity":1} 
[2025-09-28 19:49:53] testing.INFO: OrderService: Product found, checking stock {"product_id":"001132d4-be48-4901-98e5-42080c9472ea","product_name":"Test Product","current_stock":48,"requested_quantity":1,"tenant_id":"4fd2783a-ce5b-46c2-b04f-af02d5ecf186"} 
[2025-09-28 19:49:53] testing.INFO: OrderService: Finding product {"product_id":"4f86a2b1-3553-4b92-a0e2-92dcf2a739ea","tenant_id":"4d0cfc93-79bf-4dce-8ec8-42cfdc21cbbe","requested_quantity":2} 
[2025-09-28 19:49:53] testing.INFO: OrderService: Product found, checking stock {"product_id":"4f86a2b1-3553-4b92-a0e2-92dcf2a739ea","product_name":"Test Product","current_stock":50,"requested_quantity":2,"tenant_id":"4d0cfc93-79bf-4dce-8ec8-42cfdc21cbbe"} 
[2025-09-28 19:49:54] testing.INFO: OrderService: Finding product {"product_id":"350f15c4-4be7-450d-bc22-6ef190b2ddaa","tenant_id":"1c779425-0c63-4390-ac90-8cd237ce995b","requested_quantity":1} 
[2025-09-28 19:49:54] testing.INFO: OrderService: Product found, checking stock {"product_id":"350f15c4-4be7-450d-bc22-6ef190b2ddaa","product_name":"Test Product","current_stock":50,"requested_quantity":1,"tenant_id":"1c779425-0c63-4390-ac90-8cd237ce995b"} 
[2025-09-28 19:49:55] testing.INFO: OrderService: Finding product {"product_id":"b3787dcb-19e2-4e41-b2fa-e6f7234eab39","tenant_id":"ba6def8c-8745-4ed4-8a86-5ecc320251df","requested_quantity":3} 
[2025-09-28 19:49:55] testing.INFO: OrderService: Product found, checking stock {"product_id":"b3787dcb-19e2-4e41-b2fa-e6f7234eab39","product_name":"Test Product","current_stock":50,"requested_quantity":3,"tenant_id":"ba6def8c-8745-4ed4-8a86-5ecc320251df"} 
[2025-09-28 19:49:56] testing.INFO: Stock update verification {"product_id":"8c985bee-0920-4bea-a730-297b04199783","original_stock":50,"update_response_status":200,"update_response_content":{"data":{"id":"8c985bee-0920-4bea-a730-297b04199783","name":"Test Product","sku":"TEST-68d991642fee6","price":100,"stock":2,"tenant_id":"87b6a224-6563-41c8-9460-4d54e1ffddf0","category_id":null,"description":"Test product description","cost_price":80,"created_at":"2025-09-28 19:49:56"}},"verify_response_status":200,"verify_response_content":{"id":"8c985bee-0920-4bea-a730-297b04199783","name":"Test Product","sku":"TEST-68d991642fee6","price":"100.00","stock":2,"tenant_id":"87b6a224-6563-41c8-9460-4d54e1ffddf0","category_id":null,"description":"Test product description","cost_price":"80.00","created_at":"2025-09-28 19:49:56"},"expected_stock":2,"actual_stock":2} 
[2025-09-28 19:49:56] testing.INFO: OrderService: Finding product {"product_id":"8c985bee-0920-4bea-a730-297b04199783","tenant_id":"87b6a224-6563-41c8-9460-4d54e1ffddf0","requested_quantity":5} 
[2025-09-28 19:49:56] testing.INFO: OrderService: Product found, checking stock {"product_id":"8c985bee-0920-4bea-a730-297b04199783","product_name":"Test Product","current_stock":2,"requested_quantity":5,"tenant_id":"87b6a224-6563-41c8-9460-4d54e1ffddf0"} 
[2025-09-28 19:49:56] testing.ERROR: OrderService: Insufficient stock detected {"product_id":"8c985bee-0920-4bea-a730-297b04199783","product_name":"Test Product","current_stock":2,"requested_quantity":5,"tenant_id":"87b6a224-6563-41c8-9460-4d54e1ffddf0"} 
[2025-09-28 19:49:56] testing.INFO: Stock validation response {"status":422,"response_data":{"message":"Insufficient stock for product: Test Product"},"has_errors":false,"has_message":true,"all_keys":["message"]} 
[2025-09-28 19:49:56] testing.INFO: OrderService: Finding product {"product_id":"bfff96c5-cc8f-4dd5-8754-d2f53e4bcc6c","tenant_id":"fc0db8ad-4160-4978-9483-96ee0d4da95c","requested_quantity":2} 
[2025-09-28 19:49:56] testing.INFO: OrderService: Product found, checking stock {"product_id":"bfff96c5-cc8f-4dd5-8754-d2f53e4bcc6c","product_name":"Test Product","current_stock":50,"requested_quantity":2,"tenant_id":"fc0db8ad-4160-4978-9483-96ee0d4da95c"} 
[2025-09-28 19:49:56] testing.INFO: OrderService: Finding product {"product_id":"96deab51-f3cf-436d-8015-61ae719e7e09","tenant_id":"fc0db8ad-4160-4978-9483-96ee0d4da95c","requested_quantity":3} 
[2025-09-28 19:49:56] testing.INFO: OrderService: Product found, checking stock {"product_id":"96deab51-f3cf-436d-8015-61ae719e7e09","product_name":"Test Product","current_stock":50,"requested_quantity":3,"tenant_id":"fc0db8ad-4160-4978-9483-96ee0d4da95c"} 
[2025-09-28 19:49:59] testing.INFO: OrderService: Finding product {"product_id":"f11cdae0-3396-455b-893e-83c0142a303e","tenant_id":"4c6797e4-83f3-4f32-b811-419e806baeec","requested_quantity":1} 
[2025-09-28 19:49:59] testing.INFO: OrderService: Product found, checking stock {"product_id":"f11cdae0-3396-455b-893e-83c0142a303e","product_name":"Test Product","current_stock":50,"requested_quantity":1,"tenant_id":"4c6797e4-83f3-4f32-b811-419e806baeec"} 
[2025-09-28 19:49:59] testing.INFO: OrderService: Finding product {"product_id":"10366302-db72-4492-bffa-79e78a5886f5","tenant_id":"4c6797e4-83f3-4f32-b811-419e806baeec","requested_quantity":2} 
[2025-09-28 19:49:59] testing.INFO: OrderService: Product found, checking stock {"product_id":"10366302-db72-4492-bffa-79e78a5886f5","product_name":"Test Product","current_stock":50,"requested_quantity":2,"tenant_id":"4c6797e4-83f3-4f32-b811-419e806baeec"} 
[2025-09-28 19:49:59] testing.INFO: OrderService: Finding product {"product_id":"2194e7a5-ac2c-4b8a-b960-77ddab9c6572","tenant_id":"4c6797e4-83f3-4f32-b811-419e806baeec","requested_quantity":3} 
[2025-09-28 19:49:59] testing.INFO: OrderService: Product found, checking stock {"product_id":"2194e7a5-ac2c-4b8a-b960-77ddab9c6572","product_name":"Test Product","current_stock":50,"requested_quantity":3,"tenant_id":"4c6797e4-83f3-4f32-b811-419e806baeec"} 
[2025-09-28 19:50:38] testing.INFO: CategoryResource::toArray called {"resource_type":"Src\\Pms\\Core\\Domain\\Entities\\Category","resource_id":"7d85ec0d-a280-46f9-ab83-7ea54dc8708f","has_private_id":false} 
[2025-09-28 19:51:32] testing.INFO: Cross-tenant product access test {"status":404,"response_content":{"message":"Product not found"},"product_owner_tenant":"9fda589f-f605-4a6c-b783-086707ac98f5","accessing_tenant":"d4118730-d399-4313-bac2-749189854d28","product_id":"35318062-0c5e-44b7-9968-3d05147708c8","other_user_tenant":"d4118730-d399-4313-bac2-749189854d28","response_headers":{"cache-control":["no-cache, private"],"date":["Sun, 28 Sep 2025 19:51:32 GMT"],"content-type":["application/json"],"x-ratelimit-limit":["60"],"x-ratelimit-remaining":["60"],"vary":["Origin"]},"request_url":"/api/v1/tenants/d4118730-d399-4313-bac2-749189854d28/products/35318062-0c5e-44b7-9968-3d05147708c8","expected_behavior":"Route binding searches for product with tenant_id = otherTenant->id but finds none"} 
[2025-09-28 19:51:52] testing.INFO: Cross-tenant product access test {"status":404,"response_content":{"message":"Product not found"},"product_owner_tenant":"4f88f6e9-05dc-456b-aad3-8e575347ce3a","accessing_tenant":"1d3edd49-fbb4-4c0a-9bf2-8f29a6aa91d0","product_id":"b336eef4-3392-465c-8a5e-88428e3d1efc","other_user_tenant":"1d3edd49-fbb4-4c0a-9bf2-8f29a6aa91d0","response_headers":{"cache-control":["no-cache, private"],"date":["Sun, 28 Sep 2025 19:51:52 GMT"],"content-type":["application/json"],"x-ratelimit-limit":["60"],"x-ratelimit-remaining":["60"],"vary":["Origin"]},"request_url":"/api/v1/tenants/1d3edd49-fbb4-4c0a-9bf2-8f29a6aa91d0/products/b336eef4-3392-465c-8a5e-88428e3d1efc","expected_behavior":"Route binding searches for product with tenant_id = otherTenant->id but finds none"} 
[2025-09-28 19:51:55] testing.INFO: CategoryResource::toArray called {"resource_type":"Src\\Pms\\Core\\Domain\\Entities\\Category","resource_id":"dee100dc-ce15-47a1-a6c7-0678278aa4eb","has_private_id":false} 
[2025-09-28 19:52:53] testing.INFO: CategoryResource::toArray called {"resource_type":"Src\\Pms\\Core\\Domain\\Entities\\Category","resource_id":"c61123ef-9b5d-46a3-aaa0-28952a885ac1","has_private_id":false} 
[2025-09-28 19:52:53] testing.INFO: CategoryResource::toArray called {"resource_type":"Src\\Pms\\Core\\Domain\\Entities\\Category","resource_id":"9a291d57-2053-4203-8978-0c423be7895a","has_private_id":false} 
[2025-09-28 19:52:53] testing.INFO: CategoryResource::toArray called {"resource_type":"Src\\Pms\\Core\\Domain\\Entities\\Category","resource_id":"c61123ef-9b5d-46a3-aaa0-28952a885ac1","has_private_id":false} 
[2025-09-28 19:52:53] testing.INFO: CategoryResource::toArray called {"resource_type":"Src\\Pms\\Core\\Domain\\Entities\\Category","resource_id":"9a291d57-2053-4203-8978-0c423be7895a","has_private_id":false} 
[2025-09-28 19:52:54] testing.INFO: CategoryResource::toArray called {"resource_type":"Src\\Pms\\Core\\Domain\\Entities\\Category","resource_id":"76cee4f2-92ca-4a39-a209-0d1cab45555f","has_private_id":false} 
[2025-09-28 19:52:54] testing.INFO: CategoryResource::toArray called {"resource_type":"Src\\Pms\\Core\\Domain\\Entities\\Category","resource_id":"eed0f644-7780-4a7c-8038-1e18741c6092","has_private_id":false} 
[2025-09-28 19:52:54] testing.INFO: Category creation test {"create_response_status":201,"create_response_content":{"data":{"id":"eed0f644-7780-4a7c-8038-1e18741c6092","name":"Test Category","description":"Test Description","tenant_id":"db3c1c97-b895-420f-ac2a-f9a96da2102c","created_at":"2025-09-28 19:52:54"}},"extracted_category_id":"eed0f644-7780-4a7c-8038-1e18741c6092","tenant_id":"db3c1c97-b895-420f-ac2a-f9a96da2102c"} 
[2025-09-28 19:52:54] testing.INFO: === CATEGORY BINDING START ===  
[2025-09-28 19:52:54] testing.INFO: === CATEGORY BINDING PARAMS === {"tenantId":"db3c1c97-b895-420f-ac2a-f9a96da2102c","categoryId":"eed0f644-7780-4a7c-8038-1e18741c6092"} 
[2025-09-28 19:52:54] testing.INFO: === CATEGORY FOUND ===  
[2025-09-28 19:52:54] testing.INFO: CategoryResource::toArray called {"resource_type":"Src\\Pms\\Infrastructure\\Models\\Category","resource_id":"no_getId_method","has_private_id":false} 
[2025-09-28 19:52:55] testing.INFO: CategoryResource::toArray called {"resource_type":"Src\\Pms\\Core\\Domain\\Entities\\Category","resource_id":"022981fc-9f5a-4367-a2dd-a696637cc82a","has_private_id":false} 
[2025-09-28 19:52:55] testing.INFO: === CATEGORY BINDING START ===  
[2025-09-28 19:52:55] testing.INFO: === CATEGORY BINDING PARAMS === {"tenantId":"f46ff007-91d3-4a32-9f49-8f2fb7a6bbf5","categoryId":"022981fc-9f5a-4367-a2dd-a696637cc82a"} 
[2025-09-28 19:52:55] testing.INFO: === CATEGORY FOUND ===  
[2025-09-28 19:52:55] testing.INFO: CategoryResource::toArray called {"resource_type":"Src\\Pms\\Core\\Domain\\Entities\\Category","resource_id":"022981fc-9f5a-4367-a2dd-a696637cc82a","has_private_id":false} 
[2025-09-28 19:52:56] testing.INFO: CategoryResource::toArray called {"resource_type":"Src\\Pms\\Core\\Domain\\Entities\\Category","resource_id":"c9c1ccba-8c36-4a15-848a-8ed07c5568b0","has_private_id":false} 
[2025-09-28 19:52:56] testing.INFO: === CATEGORY BINDING START ===  
[2025-09-28 19:52:56] testing.INFO: === CATEGORY BINDING PARAMS === {"tenantId":"ffff9b90-76f5-4242-a2ef-3a9adadcd3e1","categoryId":"c9c1ccba-8c36-4a15-848a-8ed07c5568b0"} 
[2025-09-28 19:52:56] testing.INFO: === CATEGORY FOUND ===  
[2025-09-28 19:52:56] testing.INFO: === CATEGORY BINDING START ===  
[2025-09-28 19:52:56] testing.INFO: === CATEGORY BINDING PARAMS === {"tenantId":"ffff9b90-76f5-4242-a2ef-3a9adadcd3e1","categoryId":"c9c1ccba-8c36-4a15-848a-8ed07c5568b0"} 
[2025-09-28 19:52:56] testing.INFO: === CATEGORY NOT FOUND - THROWING 404 ===  
[2025-09-28 19:52:59] testing.INFO: CategoryResource::toArray called {"resource_type":"Src\\Pms\\Core\\Domain\\Entities\\Category","resource_id":"3f4ab57e-37bf-4287-b0c1-d2dcfc711ec2","has_private_id":false} 
[2025-09-28 19:52:59] testing.INFO: === CATEGORY BINDING START ===  
[2025-09-28 19:52:59] testing.INFO: === CATEGORY BINDING PARAMS === {"tenantId":"5d87abf6-cfef-46ed-a16b-7dba95274c13","categoryId":"3f4ab57e-37bf-4287-b0c1-d2dcfc711ec2"} 
[2025-09-28 19:52:59] testing.INFO: === CATEGORY NOT FOUND - THROWING 404 ===  
[2025-09-28 19:52:59] testing.INFO: Cross-tenant access test (CORRECTED) {"status":404,"response_content":{"message":"Category not found","exception":"Symfony\\Component\\HttpKernel\\Exception\\NotFoundHttpException","file":"D:\\worksites\\posmidev\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Exceptions\\Handler.php","line":487,"trace":[{"file":"D:\\worksites\\posmidev\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Exceptions\\Handler.php","line":463,"function":"prepareException","class":"Illuminate\\Foundation\\Exceptions\\Handler","type":"->"},{"file":"D:\\worksites\\posmidev\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Pipeline.php","line":51,"function":"render","class":"Illuminate\\Foundation\\Exceptions\\Handler","type":"->"},{"file":"D:\\worksites\\posmidev\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php","line":188,"function":"handleException","class":"Illuminate\\Routing\\Pipeline","type":"->"},{"file":"D:\\worksites\\posmidev\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Middleware\\ThrottleRequests.php","line":159,"function":"Illuminate\\Pipeline\\{closure}","class":"Illuminate\\Pipeline\\Pipeline","type":"->"},{"file":"D:\\worksites\\posmidev\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Middleware\\ThrottleRequests.php","line":125,"function":"handleRequest","class":"Illuminate\\Routing\\Middleware\\ThrottleRequests","type":"->"},{"file":"D:\\worksites\\posmidev\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Middleware\\ThrottleRequests.php","line":87,"function":"handleRequestUsingNamedLimiter","class":"Illuminate\\Routing\\Middleware\\ThrottleRequests","type":"->"},{"file":"D:\\worksites\\posmidev\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php","line":183,"function":"handle","class":"Illuminate\\Routing\\Middleware\\ThrottleRequests","type":"->"},{"file":"D:\\worksites\\posmidev\\vendor\\laravel\\framework\\src\\Illuminate\\Auth\\Middleware\\Authenticate.php","line":57,"function":"Illuminate\\Pipeline\\{closure}","class":"Illuminate\\Pipeline\\Pipeline","type":"->"},{"file":"D:\\worksites\\posmidev\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php","line":183,"function":"handle","class":"Illuminate\\Auth\\Middleware\\Authenticate","type":"->"},{"file":"D:\\worksites\\posmidev\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php","line":119,"function":"Illuminate\\Pipeline\\{closure}","class":"Illuminate\\Pipeline\\Pipeline","type":"->"},{"file":"D:\\worksites\\posmidev\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Router.php","line":805,"function":"then","class":"Illuminate\\Pipeline\\Pipeline","type":"->"},{"file":"D:\\worksites\\posmidev\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Router.php","line":784,"function":"runRouteWithinStack","class":"Illuminate\\Routing\\Router","type":"->"},{"file":"D:\\worksites\\posmidev\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Router.php","line":748,"function":"runRoute","class":"Illuminate\\Routing\\Router","type":"->"},{"file":"D:\\worksites\\posmidev\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Router.php","line":737,"function":"dispatchToRoute","class":"Illuminate\\Routing\\Router","type":"->"},{"file":"D:\\worksites\\posmidev\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Kernel.php","line":200,"function":"dispatch","class":"Illuminate\\Routing\\Router","type":"->"},{"file":"D:\\worksites\\posmidev\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php","line":144,"function":"Illuminate\\Foundation\\Http\\{closure}","class":"Illuminate\\Foundation\\Http\\Kernel","type":"->"},{"file":"D:\\worksites\\posmidev\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Middleware\\TransformsRequest.php","line":21,"function":"Illuminate\\Pipeline\\{closure}","class":"Illuminate\\Pipeline\\Pipeline","type":"->"},{"file":"D:\\worksites\\posmidev\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Middleware\\ConvertEmptyStringsToNull.php","line":31,"function":"handle","class":"Illuminate\\Foundation\\Http\\Middleware\\TransformsRequest","type":"->"},{"file":"D:\\worksites\\posmidev\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php","line":183,"function":"handle","class":"Illuminate\\Foundation\\Http\\Middleware\\ConvertEmptyStringsToNull","type":"->"},{"file":"D:\\worksites\\posmidev\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Middleware\\TransformsRequest.php","line":21,"function":"Illuminate\\Pipeline\\{closure}","class":"Illuminate\\Pipeline\\Pipeline","type":"->"},{"file":"D:\\worksites\\posmidev\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Middleware\\TrimStrings.php","line":40,"function":"handle","class":"Illuminate\\Foundation\\Http\\Middleware\\TransformsRequest","type":"->"},{"file":"D:\\worksites\\posmidev\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php","line":183,"function":"handle","class":"Illuminate\\Foundation\\Http\\Middleware\\TrimStrings","type":"->"},{"file":"D:\\worksites\\posmidev\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Middleware\\ValidatePostSize.php","line":27,"function":"Illuminate\\Pipeline\\{closure}","class":"Illuminate\\Pipeline\\Pipeline","type":"->"},{"file":"D:\\worksites\\posmidev\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php","line":183,"function":"handle","class":"Illuminate\\Foundation\\Http\\Middleware\\ValidatePostSize","type":"->"},{"file":"D:\\worksites\\posmidev\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Middleware\\PreventRequestsDuringMaintenance.php","line":99,"function":"Illuminate\\Pipeline\\{closure}","class":"Illuminate\\Pipeline\\Pipeline","type":"->"},{"file":"D:\\worksites\\posmidev\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php","line":183,"function":"handle","class":"Illuminate\\Foundation\\Http\\Middleware\\PreventRequestsDuringMaintenance","type":"->"},{"file":"D:\\worksites\\posmidev\\vendor\\laravel\\framework\\src\\Illuminate\\Http\\Middleware\\HandleCors.php","line":62,"function":"Illuminate\\Pipeline\\{closure}","class":"Illuminate\\Pipeline\\Pipeline","type":"->"},{"file":"D:\\worksites\\posmidev\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php","line":183,"function":"handle","class":"Illuminate\\Http\\Middleware\\HandleCors","type":"->"},{"file":"D:\\worksites\\posmidev\\vendor\\laravel\\framework\\src\\Illuminate\\Http\\Middleware\\TrustProxies.php","line":39,"function":"Illuminate\\Pipeline\\{closure}","class":"Illuminate\\Pipeline\\Pipeline","type":"->"},{"file":"D:\\worksites\\posmidev\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php","line":183,"function":"handle","class":"Illuminate\\Http\\Middleware\\TrustProxies","type":"->"},{"file":"D:\\worksites\\posmidev\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php","line":119,"function":"Illuminate\\Pipeline\\{closure}","class":"Illuminate\\Pipeline\\Pipeline","type":"->"},{"file":"D:\\worksites\\posmidev\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Kernel.php","line":175,"function":"then","class":"Illuminate\\Pipeline\\Pipeline","type":"->"},{"file":"D:\\worksites\\posmidev\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Kernel.php","line":144,"function":"sendRequestThroughRouter","class":"Illuminate\\Foundation\\Http\\Kernel","type":"->"},{"file":"D:\\worksites\\posmidev\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Testing\\Concerns\\MakesHttpRequests.php","line":585,"function":"handle","class":"Illuminate\\Foundation\\Http\\Kernel","type":"->"},{"file":"D:\\worksites\\posmidev\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Testing\\Concerns\\MakesHttpRequests.php","line":551,"function":"call","class":"Illuminate\\Foundation\\Testing\\TestCase","type":"->"},{"file":"D:\\worksites\\posmidev\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Testing\\Concerns\\MakesHttpRequests.php","line":359,"function":"json","class":"Illuminate\\Foundation\\Testing\\TestCase","type":"->"},{"file":"D:\\worksites\\posmidev\\tests\\Feature\\CategoriesApiTest.php","line":259,"function":"getJson","class":"Illuminate\\Foundation\\Testing\\TestCase","type":"->"},{"file":"D:\\worksites\\posmidev\\vendor\\phpunit\\phpunit\\src\\Framework\\TestCase.php","line":1188,"function":"test_cannot_access_category_from_different_tenant","class":"Tests\\Feature\\CategoriesApiTest","type":"->"},{"file":"D:\\worksites\\posmidev\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Testing\\TestCase.php","line":62,"function":"runTest","class":"PHPUnit\\Framework\\TestCase","type":"->"},{"file":"D:\\worksites\\posmidev\\vendor\\phpunit\\phpunit\\src\\Framework\\TestCase.php","line":687,"function":"runTest","class":"Illuminate\\Foundation\\Testing\\TestCase","type":"->"},{"file":"D:\\worksites\\posmidev\\vendor\\phpunit\\phpunit\\src\\Framework\\TestRunner.php","line":104,"function":"runBare","class":"PHPUnit\\Framework\\TestCase","type":"->"},{"file":"D:\\worksites\\posmidev\\vendor\\phpunit\\phpunit\\src\\Framework\\TestCase.php","line":517,"function":"run","class":"PHPUnit\\Framework\\TestRunner","type":"->"},{"file":"D:\\worksites\\posmidev\\vendor\\phpunit\\phpunit\\src\\Framework\\TestSuite.php","line":378,"function":"run","class":"PHPUnit\\Framework\\TestCase","type":"->"},{"file":"D:\\worksites\\posmidev\\vendor\\phpunit\\phpunit\\src\\Framework\\TestSuite.php","line":378,"function":"run","class":"PHPUnit\\Framework\\TestSuite","type":"->"},{"file":"D:\\worksites\\posmidev\\vendor\\phpunit\\phpunit\\src\\Framework\\TestSuite.php","line":378,"function":"run","class":"PHPUnit\\Framework\\TestSuite","type":"->"},{"file":"D:\\worksites\\posmidev\\vendor\\phpunit\\phpunit\\src\\TextUI\\TestRunner.php","line":62,"function":"run","class":"PHPUnit\\Framework\\TestSuite","type":"->"},{"file":"D:\\worksites\\posmidev\\vendor\\phpunit\\phpunit\\src\\TextUI\\Application.php","line":199,"function":"run","class":"PHPUnit\\TextUI\\TestRunner","type":"->"},{"file":"D:\\worksites\\posmidev\\vendor\\phpunit\\phpunit\\phpunit","line":104,"function":"run","class":"PHPUnit\\TextUI\\Application","type":"->"}]},"category_owner_tenant":"d2df28b3-1efe-4336-b3ba-a3abba53c5e6","accessing_tenant":"5d87abf6-cfef-46ed-a16b-7dba95274c13","category_id":"3f4ab57e-37bf-4287-b0c1-d2dcfc711ec2","other_user_tenant":"5d87abf6-cfef-46ed-a16b-7dba95274c13","response_headers":{"cache-control":["no-cache, private"],"date":["Sun, 28 Sep 2025 19:52:59 GMT"],"content-type":["application/json"],"x-ratelimit-limit":["60"],"x-ratelimit-remaining":["60"],"vary":["Origin"]},"request_url":"/api/v1/tenants/5d87abf6-cfef-46ed-a16b-7dba95274c13/categories/3f4ab57e-37bf-4287-b0c1-d2dcfc711ec2","expected_behavior":"Route binding searches for category with tenant_id = otherTenant->id but finds none"} 
[2025-09-28 19:53:10] testing.INFO: CategoryResource::toArray called {"resource_type":"Src\\Pms\\Core\\Domain\\Entities\\Category","resource_id":"3ab0b557-6124-4748-9642-a8ea6c0509bc","has_private_id":false} 
[2025-09-28 19:53:10] testing.INFO: OrderService: Finding product {"product_id":"872e4613-5bbf-4149-a6bd-6fbbea0e1f63","tenant_id":"a0bd4b5b-7668-4c7c-9d0d-2d599e538f3a","requested_quantity":3} 
[2025-09-28 19:53:10] testing.INFO: OrderService: Product found, checking stock {"product_id":"872e4613-5bbf-4149-a6bd-6fbbea0e1f63","product_name":"Smartphone Pro Max","current_stock":20,"requested_quantity":3,"tenant_id":"a0bd4b5b-7668-4c7c-9d0d-2d599e538f3a"} 
[2025-09-28 19:53:13] testing.INFO: OrderService: Finding product {"product_id":"8fe7e24d-8873-4256-a85c-ee1680832597","tenant_id":"9c84de01-2fb8-4d39-af2d-4651a43baced","requested_quantity":2} 
[2025-09-28 19:53:13] testing.INFO: OrderService: Product found, checking stock {"product_id":"8fe7e24d-8873-4256-a85c-ee1680832597","product_name":"Test Product","current_stock":50,"requested_quantity":2,"tenant_id":"9c84de01-2fb8-4d39-af2d-4651a43baced"} 
[2025-09-28 19:53:13] testing.INFO: OrderService: Finding product {"product_id":"8fe7e24d-8873-4256-a85c-ee1680832597","tenant_id":"9c84de01-2fb8-4d39-af2d-4651a43baced","requested_quantity":1} 
[2025-09-28 19:53:13] testing.INFO: OrderService: Product found, checking stock {"product_id":"8fe7e24d-8873-4256-a85c-ee1680832597","product_name":"Test Product","current_stock":48,"requested_quantity":1,"tenant_id":"9c84de01-2fb8-4d39-af2d-4651a43baced"} 
[2025-09-28 19:53:14] testing.INFO: OrderService: Finding product {"product_id":"654298ab-64c5-4ec3-b273-ee7e6e948656","tenant_id":"823d16ca-80db-40bb-9ff8-a6d04461f025","requested_quantity":2} 
[2025-09-28 19:53:14] testing.INFO: OrderService: Product found, checking stock {"product_id":"654298ab-64c5-4ec3-b273-ee7e6e948656","product_name":"Test Product","current_stock":50,"requested_quantity":2,"tenant_id":"823d16ca-80db-40bb-9ff8-a6d04461f025"} 
[2025-09-28 19:53:14] testing.INFO: OrderService: Finding product {"product_id":"bbd6ba32-54ec-48e5-a7db-87f662ecfb11","tenant_id":"2103ccd2-da40-4726-86f4-6988b5f82385","requested_quantity":1} 
[2025-09-28 19:53:14] testing.INFO: OrderService: Product found, checking stock {"product_id":"bbd6ba32-54ec-48e5-a7db-87f662ecfb11","product_name":"Test Product","current_stock":50,"requested_quantity":1,"tenant_id":"2103ccd2-da40-4726-86f4-6988b5f82385"} 
[2025-09-28 19:53:15] testing.INFO: OrderService: Finding product {"product_id":"5e8dfbfd-19ff-4119-bb86-85da11c8c646","tenant_id":"0b58a5d4-0691-4f9e-b16b-1c6f7a996f95","requested_quantity":3} 
[2025-09-28 19:53:15] testing.INFO: OrderService: Product found, checking stock {"product_id":"5e8dfbfd-19ff-4119-bb86-85da11c8c646","product_name":"Test Product","current_stock":50,"requested_quantity":3,"tenant_id":"0b58a5d4-0691-4f9e-b16b-1c6f7a996f95"} 
[2025-09-28 19:53:16] testing.INFO: Stock update verification {"product_id":"d061240a-abc4-4910-8e25-761969fc0f7d","original_stock":50,"update_response_status":200,"update_response_content":{"data":{"id":"d061240a-abc4-4910-8e25-761969fc0f7d","name":"Test Product","sku":"TEST-68d9922c474fa","price":100,"stock":2,"tenant_id":"e2770dae-8d0d-4728-8299-1a4eaa3cb4c8","category_id":null,"description":"Test product description","cost_price":80,"created_at":"2025-09-28 19:53:16"}},"verify_response_status":200,"verify_response_content":{"id":"d061240a-abc4-4910-8e25-761969fc0f7d","name":"Test Product","sku":"TEST-68d9922c474fa","price":"100.00","stock":2,"tenant_id":"e2770dae-8d0d-4728-8299-1a4eaa3cb4c8","category_id":null,"description":"Test product description","cost_price":"80.00","created_at":"2025-09-28 19:53:16"},"expected_stock":2,"actual_stock":2} 
[2025-09-28 19:53:16] testing.INFO: OrderService: Finding product {"product_id":"d061240a-abc4-4910-8e25-761969fc0f7d","tenant_id":"e2770dae-8d0d-4728-8299-1a4eaa3cb4c8","requested_quantity":5} 
[2025-09-28 19:53:16] testing.INFO: OrderService: Product found, checking stock {"product_id":"d061240a-abc4-4910-8e25-761969fc0f7d","product_name":"Test Product","current_stock":2,"requested_quantity":5,"tenant_id":"e2770dae-8d0d-4728-8299-1a4eaa3cb4c8"} 
[2025-09-28 19:53:16] testing.ERROR: OrderService: Insufficient stock detected {"product_id":"d061240a-abc4-4910-8e25-761969fc0f7d","product_name":"Test Product","current_stock":2,"requested_quantity":5,"tenant_id":"e2770dae-8d0d-4728-8299-1a4eaa3cb4c8"} 
[2025-09-28 19:53:16] testing.INFO: Stock validation response {"status":422,"response_data":{"message":"Insufficient stock for product: Test Product"},"has_errors":false,"has_message":true,"all_keys":["message"]} 
[2025-09-28 19:53:17] testing.INFO: OrderService: Finding product {"product_id":"5c23f471-e5e5-4e4b-b6c4-fa99a1105315","tenant_id":"577c3ac9-74bf-41f2-ab83-23597de97f69","requested_quantity":2} 
[2025-09-28 19:53:17] testing.INFO: OrderService: Product found, checking stock {"product_id":"5c23f471-e5e5-4e4b-b6c4-fa99a1105315","product_name":"Test Product","current_stock":50,"requested_quantity":2,"tenant_id":"577c3ac9-74bf-41f2-ab83-23597de97f69"} 
[2025-09-28 19:53:17] testing.INFO: OrderService: Finding product {"product_id":"ca1cc45c-b654-4d76-ac2d-72d66b4da3c0","tenant_id":"577c3ac9-74bf-41f2-ab83-23597de97f69","requested_quantity":3} 
[2025-09-28 19:53:17] testing.INFO: OrderService: Product found, checking stock {"product_id":"ca1cc45c-b654-4d76-ac2d-72d66b4da3c0","product_name":"Test Product","current_stock":50,"requested_quantity":3,"tenant_id":"577c3ac9-74bf-41f2-ab83-23597de97f69"} 
[2025-09-28 19:53:20] testing.INFO: OrderService: Finding product {"product_id":"a59483e7-46f3-4b9b-acab-da2c6ad87e5f","tenant_id":"ded39e77-5000-4f00-8405-2779b29d6578","requested_quantity":1} 
[2025-09-28 19:53:20] testing.INFO: OrderService: Product found, checking stock {"product_id":"a59483e7-46f3-4b9b-acab-da2c6ad87e5f","product_name":"Test Product","current_stock":50,"requested_quantity":1,"tenant_id":"ded39e77-5000-4f00-8405-2779b29d6578"} 
[2025-09-28 19:53:20] testing.INFO: OrderService: Finding product {"product_id":"12f380c0-744f-4b57-8218-fd0890aef8b9","tenant_id":"ded39e77-5000-4f00-8405-2779b29d6578","requested_quantity":2} 
[2025-09-28 19:53:20] testing.INFO: OrderService: Product found, checking stock {"product_id":"12f380c0-744f-4b57-8218-fd0890aef8b9","product_name":"Test Product","current_stock":50,"requested_quantity":2,"tenant_id":"ded39e77-5000-4f00-8405-2779b29d6578"} 
[2025-09-28 19:53:20] testing.INFO: OrderService: Finding product {"product_id":"a56cf20c-287b-4faf-a9c7-cb22f95ff30a","tenant_id":"ded39e77-5000-4f00-8405-2779b29d6578","requested_quantity":3} 
[2025-09-28 19:53:20] testing.INFO: OrderService: Product found, checking stock {"product_id":"a56cf20c-287b-4faf-a9c7-cb22f95ff30a","product_name":"Test Product","current_stock":50,"requested_quantity":3,"tenant_id":"ded39e77-5000-4f00-8405-2779b29d6578"} 
[2025-09-28 19:53:25] testing.INFO: OrderService: Finding product {"product_id":"3f0f730f-5e2d-4d54-805d-86641e13000a","tenant_id":"0485e813-aaf9-4da2-bbbf-96780b1b46d0","requested_quantity":3} 
[2025-09-28 19:53:25] testing.INFO: OrderService: Product found, checking stock {"product_id":"3f0f730f-5e2d-4d54-805d-86641e13000a","product_name":"Mineral Water","current_stock":10,"requested_quantity":3,"tenant_id":"0485e813-aaf9-4da2-bbbf-96780b1b46d0"} 
[2025-09-28 19:53:25] testing.INFO: OrderService: Finding product {"product_id":"3f0f730f-5e2d-4d54-805d-86641e13000a","tenant_id":"0485e813-aaf9-4da2-bbbf-96780b1b46d0","requested_quantity":8} 
[2025-09-28 19:53:25] testing.INFO: OrderService: Product found, checking stock {"product_id":"3f0f730f-5e2d-4d54-805d-86641e13000a","product_name":"Mineral Water","current_stock":7,"requested_quantity":8,"tenant_id":"0485e813-aaf9-4da2-bbbf-96780b1b46d0"} 
[2025-09-28 19:53:25] testing.ERROR: OrderService: Insufficient stock detected {"product_id":"3f0f730f-5e2d-4d54-805d-86641e13000a","product_name":"Mineral Water","current_stock":7,"requested_quantity":8,"tenant_id":"0485e813-aaf9-4da2-bbbf-96780b1b46d0"} 
[2025-09-28 19:53:33] testing.INFO: Cross-tenant product access test {"status":404,"response_content":{"message":"Product not found"},"product_owner_tenant":"ef466139-fb91-4290-96ab-0324ad6e0c33","accessing_tenant":"d8902ee6-740e-44c9-bc41-d0472da02a2e","product_id":"e24dd81e-fa96-4be2-8287-f9277c339bc2","other_user_tenant":"d8902ee6-740e-44c9-bc41-d0472da02a2e","response_headers":{"cache-control":["no-cache, private"],"date":["Sun, 28 Sep 2025 19:53:33 GMT"],"content-type":["application/json"],"x-ratelimit-limit":["60"],"x-ratelimit-remaining":["60"],"vary":["Origin"]},"request_url":"/api/v1/tenants/d8902ee6-740e-44c9-bc41-d0472da02a2e/products/e24dd81e-fa96-4be2-8287-f9277c339bc2","expected_behavior":"Route binding searches for product with tenant_id = otherTenant->id but finds none"} 
[2025-09-28 19:53:36] testing.INFO: CategoryResource::toArray called {"resource_type":"Src\\Pms\\Core\\Domain\\Entities\\Category","resource_id":"9762ff32-6cce-4dc2-b2cb-1d93371be30c","has_private_id":false} 
[2025-09-28 19:53:39] testing.INFO: OrderService: Finding product {"product_id":"edc6fc41-df0e-46a7-9678-ab2079a209b3","tenant_id":"9d08a37a-1868-4baf-a5fc-9ac7506e1ed5","requested_quantity":3} 
[2025-09-28 19:53:39] testing.INFO: OrderService: Product found, checking stock {"product_id":"edc6fc41-df0e-46a7-9678-ab2079a209b3","product_name":"Order Test Product","current_stock":10,"requested_quantity":3,"tenant_id":"9d08a37a-1868-4baf-a5fc-9ac7506e1ed5"} 
[2025-09-28 19:53:42] testing.INFO: OrderService: Finding product {"product_id":"02193d05-a321-444e-abf3-1ee4f2777fea","tenant_id":"6cd7d595-a123-4c14-8ecb-a2df1e427084","requested_quantity":2} 
[2025-09-28 19:53:42] testing.INFO: OrderService: Product found, checking stock {"product_id":"02193d05-a321-444e-abf3-1ee4f2777fea","product_name":"Cross Service Product","current_stock":15,"requested_quantity":2,"tenant_id":"6cd7d595-a123-4c14-8ecb-a2df1e427084"} 
